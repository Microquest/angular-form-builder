(function(){var a;a=function(a,b){var c,d;for(c in a)d=a[c],"$$hashKey"!==c&&(b[c]=d)},angular.module("builder.controller",["builder.provider"]).controller("fbFormObjectEditableController",["$scope","$injector","$document","Upload",function(b,c,d,e){var f,g,h;return f=c.get("$builder"),h=c.get("$modal"),g=c.get("$filter"),void 0===b.formObject.id&&(b.formObject.id=f.config.max_id,f.config.max_id=f.config.max_id+1),b.cancel=function(){return b.modalInstance.dismiss("cancel")},b.save=function(a){return b.placeholder=a,b.modalInstance.close()},b.openSummerNote=function(){return b.summerNoteText=b.formObject.placeholder,b.modalInstance=h.open({template:'<div class="modal-header"><button type="button" class="close" ng-click="cancel()"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button><h4 class="modal-title">Edit Rich Content</div></div><div class="modal-body no-padding"><div summernote ng-model="summerNoteText"></div></div><div class="modal-footer"><button class="btn btn-white pull-left" ng-click="cancel()">Cancel</button><button class="btn btn-primary pull-right" ng-click="save(summerNoteText)">Apply</button></div>',scope:b})},b.convertFileToData=function(a,c,d){return e.dataUrl(a,!0).then(function(a){return b.backgroundImage=a})},b.date=Date.now(),b.keys=Object.keys(f.forms),b.setupScope=function(c){var d;return a(c,b),b.optionsText=c.options.join("\n"),b.$watch("[label,label_visible, label_inline, description, placeholder, backgroundImage, required, options, validation, multiple, minLength, maxLength, dateRangeStart, dateRangeEnd, disableWeekends, maxDate, requireConfirmation, readOnly, minRange, maxRange, nextXDays]",function(){return c.label=b.label,c.label_visible=b.label_visible,c.label_inline=b.label_inline,c.description=b.description,c.placeholder=b.placeholder,c.backgroundImage=b.backgroundImage,c.required=b.required,c.options=b.options,c.multiple=b.multiple,c.validation=b.validation,c.minLength=b.minLength,c.maxLength=b.maxLength,c.dateRangeStart=b.dateRangeStart,c.dateRangeEnd=b.dateRangeEnd,c.disableWeekends=b.disableWeekends,c.maxDate=b.maxDate,c.requireConfirmation=b.requireConfirmation,c.readOnly=b.readOnly,c.minRange=b.minRange,c.maxRange=b.maxRange,c.nextXDays=b.nextXDays},!0),b.$watch("optionsText",function(a){var c;return b.options=function(){var b,d,e,f;for(e=a.split("\n"),f=[],b=0,d=e.length;b<d;b++)c=e[b],c.length>0&&f.push(c);return f}(),b.inputText=b.options[0]}),d=f.components[c.component],b.validationOptions=d.validationOptions},b.data={model:null,backup:function(){return this.model={label:b.label,label_inline:b.label_inline,label_visible:b.label_visible,description:b.description,placeholder:b.placeholder,backgroundImage:b.backgroundImage,required:b.required,optionsText:b.optionsText,validation:b.validation,multiple:b.multiple,minLength:b.minLength,maxLength:b.maxLength,dateRangeStart:b.dateRangeStart,dateRangeEnd:b.dateRangeEnd,disableWeekends:b.disableWeekends,maxDate:b.maxDate,requireConfirmation:b.requireConfirmation,readOnly:b.readOnly,minRange:b.minRange,maxRange:b.maxRange,nextXDays:b.nextXDays}},rollback:function(){if(this.model)return b.label=this.model.label,b.label_inline=this.model.label_inline,b.label_visible=this.model.label_visible,b.description=this.model.description,b.placeholder=this.model.placeholder,b.backgroundImage=this.model.backgroundImage,b.required=this.model.required,b.optionsText=this.model.optionsText,b.validation=this.model.validation,b.multiple=this.model.multiple,b.minLength=this.model.minLength,b.maxLength=this.model.maxLength,b.dateRangeStart=this.model.dateRangeStart,b.dateRangeEnd=this.model.dateRangeEnd,b.disableWeekends=this.model.disableWeekends,b.maxDate=this.model.maxDate,b.requireConfirmation=this.model.requireConfirmation,b.readOnly=this.model.readOnly,b.minRange=this.model.minRange,b.maxRange=this.model.maxRange,b.nextXDays=this.model.nextXDays}}}]).controller("fbComponentsController",["$scope","$injector",function(a,b){var c;return c=b.get("$builder"),a.selectGroup=function(b,d){var e,f,g,h;null!=b&&b.preventDefault(),a.activeGroup=d,a.components=[],g=c.components,h=[];for(f in g)e=g[f],e.group===d&&h.push(a.components.push(e));return h},a.groups=c.groups,a.activeGroup=a.groups[0],a.allComponents=c.components,a.$watch("allComponents",function(){return a.selectGroup(null,a.activeGroup)})}]).controller("fbComponentController",["$scope",function(b){return b.copyObjectToScope=function(c){return a(c,b)}}]).controller("fbFormController",["$scope","$injector",function(a,b){var c,d,e;return c=b.get("$builder"),e=b.get("$timeout"),d=b.get("$rootScope"),d.fields=c.forms,null==a.input&&(a.input=[]),a.$watch("form",function(){return a.input.length>a.form.length&&a.input.splice(a.form.length),e(function(){return a.$broadcast(c.broadcastChannel.updateInput)})},!0),a.broadcastMessage=function(a){return d.$broadcast(a)},a.updateCanvasValue=function(a){var b,c;return b=document.getElementById(a),b?c=b.toDataURL():""}}]).controller("fbFormRowController",["$scope","$injector",function(a,b){var c,d,e;return c=b.get("$builder"),e=b.get("$timeout"),d=b.get("$rootScope"),a.$watch("formRow.formObjects.length",function(){return a.width=0===a.formRow.formObjects.length?12:12/a.formRow.formObjects.length})}]).controller("fbFormObjectController",["$scope","$injector",function(b,c){var d;return d=c.get("$builder"),b.copyObjectToScope=function(c){return a(c,b)},b.updateInput=function(a){var c;return c={id:b.formObject.id,label:b.formObject.label,value:null!=a?a:""},b.$parent.$parent.$parent.input.splice(b.$index,1,c)}}])}).call(this),function(){angular.module("builder.directive",["builder.provider","builder.controller","builder.drag","validator","ngFileUpload"]).directive("richText",["$injector",function(a){return{restrict:"E",link:function(a,b,c){return a.text=a.placeholder,a.$watch("placeholder",function(){return a.text=a.placeholder}),a.$watch("text",function(){if("Rich Content"!==a.text)return b[0].innerHTML=a.text})}}}]).filter("nospace",function(){return function(a){if(null!=a&&angular.isString(a))return a.replace(/[^A-Z0-9]/gi,"")}}).filter("predicate",function(){return function(a){switch(a){case"eq":a="Equals";break;case"not_eq":a="Does not equal";break;case"matches":a="Matches";break;case"does_not_match":a="Does not match";break;case"contains":a="Contains";break;case"does_not_contain":a="Does not contain";break;case"lt":a="Less than";break;case"lteq":a="Less than or equal to";break;case"gt":a="Greater than";break;case"gteq":a="Greater than or equal to";break;case"not_in":a="Not in";break;case"not_null":a="is Not Empty";break;case"null":a="is Empty"}return a}}).directive("uiDate",["$injector",function(a){return{restrict:"E",template:'<p class="input-group">\n  <input type="text" class="form-control" max-date="maxDate" datepicker-popup="{{format}}" ng-model="inputText" is-open="opened" min-date="minDate" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" close-text="Close"  validator-required="{{required}}" validator-group="{{required}}" id="{{formName+index}}" disabled/>\n  <span class="input-group-btn">\n    <button ng-disabled="readOnly" type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicons glyphicons-calendar"></i></button>\n  </span>\n</p>',link:function(a,b,c){var d;return a.inputText="",a.open=function(b){return b.preventDefault(),b.stopPropagation(),a.opened=!0},d=function(a,b){var c,d,e,f;for(d=moment(),c=0,e=f=0;0<=b?f<=b:f>=b;e=0<=b?++f:--f)6!==d.isoWeekday()&&7!==d.isoWeekday()||c++,d.add(1,"days");return moment(a).add(c,"days").format("YYYY-MM-DD")},a.dateRangeStart?a.minDate=moment().add(a.dateRangeStart,"days").format("YYYY-MM-DD"):a.minDate=moment().format("YYYY-MM-DD"),a.dateRangeEnd&&(a.maxDate=moment().add(a.dateRangeEnd,"days").format("YYYY-MM-DD")),a.disableWeekends?(a.dateRangeStart&&(a.minDate=d(a.minDate,a.dateRangeStart)),a.dateRangeEnd&&(a.maxDate=d(a.maxDate,a.dateRangeEnd)),a.disabled=function(a,b){return"day"===b&&(0===a.getDay()||6===a.getDay())}):a.disabled=function(a,b){}}}}]).directive("fbBuilder",["$injector",function(a){var b,c;return b=a.get("$builder"),c=a.get("$drag"),{restrict:"A",scope:{fbBuilder:"@"},template:"<div class='form-horizontal'>\n    <div class='row fb-form-row-editable' ng-repeat=\"row in formRows\"\n        fb-form-row-editable=\"row\" fb-form-row-index='{{$index}}'></div>\n    <div ng-show='formRows.length === 0' class='row'>\n        <div class='col-sm-12' style='text-align: center'>\n            <h4> Form is empty </h4>\n            <p> Add a new row to start building your form </p>\n            <button type=\"button\" class=\"btn btn-md btn-default add-row\" style=''>\n              <i class=\"glyphicon glyphicon-plus\"></i> Add Row\n            </button>\n        </div>\n    </div>\n</div>",link:function(a,d,e){var f,g,h;return a.formName=e.fbBuilder,null==(g=b.forms)[h=a.formName]&&(g[h]=[]),a.formRows=b.forms[a.formName],b.addFormRow(a.formName),f=!0,$(d).find(".add-row").click(function(){return b.addFormRow(a.formName),a.$apply()}),$(d).addClass("fb-builder"),c.droppable($(d),{move:function(a){if(f)return $("div.fb-form-object-editable").popover("hide"),f=!1},up:function(a,b,e){f=!0,c.isMouseMoved()||$(d).find(".empty").remove()}})}}}]).directive("fbFormRowEditable",["$injector",function(a){var b,c;return b=a.get("$builder"),c=a.get("$drag"),{restrict:"A",scope:{fbFormRowEditable:"@",fbFormRowIndex:"@"},template:'<div class=\'col col-sm-{{width}} fb-form-object-editable\' ng-repeat="object in formObjects"\n    fb-form-object-editable="object"></div>\n<div class="col col-sm-12 notify fb-form-row-empty" ng-show=\'formObjects.length === 0\' style=\'text-align: center; vertical-align: middle;\'>\n    <button type="button" class="btn btn-xs btn-default delete-row pull-right" style=\'margin-top:10px\'>\n      <i class="glyphicon glyphicon-remove"></i>\n    </button>\n    <h4>Empty Row</h4>\n    <p> Drag and drop components here </p>\n</div>\n',link:function(a,d,e){var f;return a.width=12,a.formName=a.$parent.formName,a.formObjects=b.forms[a.formName][a.fbFormRowIndex].formObjects,f=!0,$(d).find(".delete-row").click(function(){return b.removeFormRow(a.formName,a.fbFormRowIndex),a.$apply()}),$(d).addClass("fb-form-row-editable"),c.droppable($(d),{move:function(b){var c,e,f,g,h,i,j,k,l,m,n;if(f=$(d).find(".fb-form-object-editable:not(.empty,.dragging)"),0===f.length)return void(0===$(d).find(".fb-form-object-editable.empty").length&&($(d).find(".notify").hide(),$(d).prepend($("<div class='col col-sm-"+a.width+" fb-form-object-editable empty'></div>"))));for(a.width=12/(f.length+1),i=[],i.push(-1e3),g=k=0,m=f.length;k<m;g=k+=1)e=$(f[g]),h=e.offset(),j=e.width(),i.push(h.left+j/2);for(i.push(i[i.length-1]+1e3),g=l=1,n=i.length;l<n;g=l+=1)if(b.pageX>i[g-1]&&b.pageX<=i[g]){$(d).find(".empty").remove(),c=$("<div class='col col-sm-"+(a.width-1)+" fb-form-object-editable empty'></div>"),g-1<f.length?c.insertBefore($(f[g-1])):c.insertAfter($(f[g-2]));break}},out:function(){var b;return b=$(d).find(".fb-form-object-editable:not(.empty,.dragging)"),a.width=12/b.length,f&&($("div.fb-form-object-editable").popover("hide"),f=!1),$(d).find(".notify").show(),$(d).find(".empty").remove()},up:function(e,g,h){var i,j,k,l;return f=!0,c.isMouseMoved()?(g&&("mirror"===h.mode&&b.insertFormObject(a.formName,a.fbFormRowIndex,$(d).find(".empty").index(".fb-form-object-editable"),{component:h.object.componentName}),"drag"===h.mode&&(k=h.object.formObject.index,i=$(d).find(".empty").index(".fb-form-object-editable"),k<i&&i--,j=a.fbFormRowIndex,l=h.object.formObject.row,b.updateFormObjectIndex(a.formName,l,j,k,i))),$(d).find(".empty").remove()):void $(d).find(".empty").remove()}}),a.$on("formBuilder:formObjectRemoved",function(){var b;return b=$(d).find(".fb-form-object-editable:not(.empty,.dragging)"),a.width=12/(b.length-1)})}}}]).directive("fbFormObjectEditable",["$injector",function(a){var b,c,d,e;return b=a.get("$builder"),d=a.get("$drag"),c=a.get("$compile"),e=a.get("$validator"),{restrict:"A",controller:"fbFormObjectEditableController",scope:{formObject:"=fbFormObjectEditable"},link:function(a,f){var g;if(a.inputArray=[],a.$component=b.components[a.formObject.component],a.setupScope(a.formObject),a.$watch("$component.template",function(d){var e,g;if(d)return e="<div class='row'>\n  <div class=\"col-sm-10\" style='pointer-events: none;'>"+d+'  </div>\n  <div class="col-sm-2" style=\'vertical-align: middle\'>\n      <div class=\'row\' style=\'margin:5px; margin-top: 10px\'>\n          <button type="button" ng-click="" class="btn btn-xs btn-danger delete-item">\n            </i><i class="glyphicon glyphicon-remove"></i>\n          </button>\n      </div>\n      <div class=\'row\' style=\'margin:5px\'>\n          <button type="button" class="btn btn-xs btn-info modify-item">\n            <i class="glyphicons glyphicons-edit"></i><i class="glyphicon glyphicon-edit"></i>\n          </button>\n      </div>\n  </div>\n</div>',g=c(e)(a),$(f).html(g),$(f).find(".modify-item").click(function(){return $(f).popover("toggle")}),$(f).find(".delete-item").click(function(){return b.removeFormObject(a.$parent.$parent.formName,a.$parent.$parent.$parent.$index,a.$parent.$index),a.$emit("formBuilder:formObjectRemoved"),$(f).popover("hide")})}),d.draggable($(f),{object:{formObject:a.formObject}}),a.formObject.editable)return g={},a.$watch("$component.popoverTemplate",function(d){if(d)return $(f).removeClass(g.id),g={id:"fb-"+Math.random().toString().substr(2),isClickedSave:!1,view:null,html:d},g.html=$(g.html).addClass(g.id),g.view=c(g.html)(a),$(f).addClass(g.id),$(f).popover({html:!0,title:a.$component.label,content:g.view,container:"body",placement:b.config.popoverPlacement,trigger:"manual"})}),a.popover={save:function(b){b.preventDefault(),e.validate(a).success(function(){return g.isClickedSave=!0,$(f).popover("hide")})},remove:function(c){c.preventDefault(),b.removeFormObject(a.$parent.formName,a.$parent.$index),$(f).popover("hide")},shown:function(){return a.data.backup(),g.isClickedSave=!1},cancel:function(b){a.data.rollback(),b&&(b.preventDefault(),$(f).popover("hide"))}},$(f).on("show.bs.popover",function(){var a,b,c;return!d.isMouseMoved()&&($("div.fb-form-object-editable:not(."+g.id+")").popover("hide"),a=$("form."+g.id).closest(".popover"),a.length>0?(b=$(f).offset().top+$(f).height()/2,c=b-a.height()/2,a.css({position:"absolute",top:c}),a.show(),setTimeout(function(){return a.addClass("in"),$(f).triggerHandler("shown.bs.popover")},0),!1):void 0)}),$(f).on("shown.bs.popover",function(){$(".popover ."+g.id+" input:first").select(),a.$apply(function(){return a.popover.shown()})}),$(f).on("hide.bs.popover",function(){var b;return b=$("form."+g.id).closest(".popover"),g.isClickedSave||(a.$$phase||a.$root.$$phase?a.popover.cancel():a.$apply(function(){return a.popover.cancel()})),b.removeClass("in"),setTimeout(function(){return b.hide()},300),!1})}}}]).directive("componentSelector",["$injector",function(a){var b;return b=a.get("$builder"),{restrict:"E",template:'<select ng-model="formObject.logic.component" class="form-control custom-m-b">\n  <optgroup ng-repeat="(groupName, items) in fields()" label="{{\'Page: \' + groupName}}">\n      <option ng-selected="item.id === componentize(formObject.logic.component)" ng-if="keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)" ng-repeat="item in fields()[groupName]" value="{{item}}">{{item.component}} - {{item.label}}</option>\n  </optgroup>\n</select>',link:function(a,c,d){return a.fields=function(){return c.parent().parent().parent().parent().parent().is(":visible")===!0?b.forms:[]},a.componentize=function(a){if(null!=a)return angular.fromJson(a).id}}}}]).directive("fbComponents",function(){return{restrict:"A",template:'<ul ng-if="groups.length > 1" class="nav nav-tabs nav-justified" style=\'margin-top:10px\'>\n    <li ng-repeat="group in groups" ng-class="{active:activeGroup==group}">\n        <a href=\'#\' ng-click="selectGroup($event, group)">{{group}}</a>\n    </li>\n</ul>\n<div class=\'form-horizontal\' style=\'margin:10px\'>\n    <div class=\'fb-component\' ng-repeat="component in components"\n        fb-component="component"></div>\n</div>',controller:"fbComponentsController"}}).directive("fbComponent",["$injector",function(a){var b,c,d;return b=a.get("$builder"),d=a.get("$drag"),c=a.get("$compile"),{restrict:"A",scope:{component:"=fbComponent"},controller:"fbComponentController",link:function(a,b){return a.copyObjectToScope(a.component),d.draggable($(b),{mode:"mirror",defer:!1,object:{componentName:a.component.name}}),a.$watch("component.template",function(d){var e;if(d)return e=c(d)(a),$(b).html(e)})}}}]).directive("fbMultiple",["$injector",function(a){var b;return b=a.get("$builder"),{restrict:"E",scope:{array:"="},templateUrl:"src/ngMultiple.html",link:function(a,c,d){return a.seeForms=function(){return console.log(b.forms)},a.select=function(b){return a.selected=b},a.addPage=function(){return a.array.push(a.array.length+1)}}}}]).directive("fbForm",["$injector",function(a){return{restrict:"A",require:"ngModel",scope:{formName:"@fbForm",input:"=ngModel",default:"=fbDefault"},template:"<div class='form-horizontal'>\n  <div class='fb-form-row' ng-repeat=\"row in form\" fb-form-row form-row=\"row\"></div>\n  <div ng-if='form.length === 0'>\n      <h4> This form is empty </h4>\n  </div>\n</div>",controller:"fbFormController",link:function(b,c,d){var e,f,g;return e=a.get("$builder"),null==(f=e.forms)[g=b.formName]&&(f[g]=[]),b.form=e.forms[b.formName]}}}]).directive("fbFormRow",["$injector",function(a){var b,c,d;return b=a.get("$builder"),c=a.get("$compile"),d=a.get("$parse"),{restrict:"A",scope:{formRow:"="},template:"<div class='row fb-form-row'>\n  <div class='col col-sm-{{width}} fb-form-object' ng-repeat=\"object in formRow.formObjects\" fb-form-object=\"object\"></div>\n  <div ng-if='form.length === 0'>\n      <h4> This row is empty </h4>\n  </div>\n</div>",controller:"fbFormRowController",link:function(a,b,c){return a.width=0===a.formRow.formObjects.length?12:12/a.formRow.formObjects.length}}}]).directive("fbFormObject",["$injector",function(a){var b,c,d;return b=a.get("$builder"),c=a.get("$compile"),d=a.get("$parse"),{restrict:"A",controller:"fbFormObjectController",link:function(a,e,f){return a.formObject=d(f.fbFormObject)(a),a.$component=b.components[a.formObject.component],a.$on(b.broadcastChannel.updateInput,function(){return a.updateInput(a.inputText)}),a.$on("$builder.$directive.valuesChanged",function(b,c){return a.inputText=c[a.index].value,a.updateInput(a.inputText)}),a.$component.arrayToText&&(a.inputArray=[],a.$watch("inputArray",function(b,c){var d,e,f;if(b!==c){d=[];for(e in a.inputArray)a.inputArray[e]&&"diff"!==e&&d.push(null!=(f=a.options[e])?f:a.inputArray[e]);return a.inputText=d.join(", ")}},!0)),a.$watch("inputText",function(){return a.updateInput(a.inputText)}),a.$watch(f.fbFormObject,function(){return a.copyObjectToScope(a.formObject)},!0),a.$watch("$component.template",function(b){var d,f,g;if(b)return f=$(b),d=f.find("[ng-model='inputText']"),d.attr({validator:"{{validation}}"}),g=c(f)(a),$(e).html(g)}),!a.$component.arrayToText&&a.formObject.options.length>0&&(a.inputText=a.formObject.options[0]),a.$watch("default['"+a.formObject.id+"']",function(b){if(b)return a.$component.arrayToText?a.inputArray=b:a.inputText=b})}}}]).directive("uploadPhoto",function(){return{restrict:"A",link:function(a,b,c){return angular.element("#uploadBtn").onchange=function(){return angular.element("#uploadFile").value=this.value}}}})}.call(this),function(){angular.module("builder.drag",[]).provider("$drag",function(){var a,b,c;a=null,b=null,this.data={draggables:{},droppables:{}},this.mouseMoved=!1,this.mx=0,this.my=0,this.isMouseMoved=function(a){return function(){return a.mouseMoved}}(this),this.hooks={down:{},move:{},up:{}},this.eventMouseMove=function(){},this.eventMouseUp=function(){},$(function(a){return function(){return $(document).on("mousedown",function(b){var c,d,e;a.mouseMoved=!1,e=a.hooks.down;for(d in e)(c=e[d])(b)}),$(document).on("mousemove",function(b){var c,d,e;if(b.pageX!==a.mx||b.pageY!==a.my){a.mx=b.pageX,a.my=b.pageY,a.mouseMoved=!0,e=a.hooks.move;for(d in e)(c=e[d])(b)}}),$(document).on("mouseup",function(b){var c,d,e;e=a.hooks.up;for(d in e)(c=e[d])(b)})}}(this)),this.currentId=0,this.getNewId=function(a){return function(){return""+a.currentId++}}(this),this.setupEasing=function(){return jQuery.extend(jQuery.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}})},this.setupProviders=function(c){return a=c,b=a.get("$rootScope")},this.isHover=function(a){return function(a,b){var c,d,e,f,g;return d=a.offset(),e=b.offset(),f={width:a.width(),height:a.height()},g={width:b.width(),height:b.height()},c={x:!1,y:!1},c.x=d.left>e.left&&d.left<e.left+g.width,c.x=c.x||d.left+f.width>e.left&&d.left+f.width<e.left+g.width,!!c&&(c.y=d.top>e.top&&d.top<e.top+g.height,c.y=c.y||d.top+f.height>e.top&&d.top+f.height<e.top+g.height,c.x&&c.y)}}(this),c=function(a,b){return setTimeout(function(){return b()},a)},this.autoScroll={up:!1,down:!1,scrolling:!1,scroll:function(a){return function(){return a.autoScroll.scrolling=!0,a.autoScroll.up?($("html, body").dequeue().animate({scrollTop:$(window).scrollTop()-50},100,"easeOutQuad"),c(100,function(){return a.autoScroll.scroll()})):a.autoScroll.down?($("html, body").dequeue().animate({scrollTop:$(window).scrollTop()+50},100,"easeOutQuad"),c(100,function(){return a.autoScroll.scroll()})):a.autoScroll.scrolling=!1}}(this),start:function(a){return function(b){if(b.clientY<50){if(a.autoScroll.up=!0,a.autoScroll.down=!1,!a.autoScroll.scrolling)return a.autoScroll.scroll()}else{if(!(b.clientY>$(window).innerHeight()-50))return a.autoScroll.up=!1,a.autoScroll.down=!1;if(a.autoScroll.up=!1,a.autoScroll.down=!0,!a.autoScroll.scrolling)return a.autoScroll.scroll()}}}(this),stop:function(a){return function(){return a.autoScroll.up=!1,a.autoScroll.down=!1}}(this)},this.dragMirrorMode=function(a){return function(b,c,d){var e;return null==c&&(c=!0),e={id:a.getNewId(),mode:"mirror",maternal:b[0],element:null,object:d},b.on("mousedown",function(d){var f;if(d.preventDefault(),f=b.clone(),e.element=f[0],f.addClass("fb-draggable form-horizontal prepare-dragging"),a.hooks.move.drag=function(c,d){var g,h,i,j;if(!f.hasClass("prepare-dragging")||(f.css({width:b.width(),height:b.height()}),f.removeClass("prepare-dragging"),f.addClass("dragging"),!d)){f.offset({left:c.pageX-f.width()/2,top:c.pageY-f.height()/2}),a.autoScroll.start(c),i=a.data.droppables,j=[];for(h in i)g=i[h],a.isHover(f,$(g.element))?j.push(g.move(c,e)):j.push(g.out(c,e));return j}},a.hooks.up.drag=function(b){var c,d,g,h;h=a.data.droppables;for(d in h)c=h[d],g=a.isHover(f,$(c.element)),c.up(b,g,e);return delete a.hooks.move.drag,delete a.hooks.up.drag,e.element=null,f.remove(),a.autoScroll.stop()},$("body").append(f),!c)return a.hooks.move.drag(d,c)}),e}}(this),this.dragDragMode=function(a){return function(b,c,d){var e;return null==c&&(c=!0),e={id:a.getNewId(),mode:"drag",maternal:null,element:b[0],object:d},b.addClass("fb-draggable"),b.on("mousedown",function(d){if(d.preventDefault(),!b.hasClass("dragging"))return b.addClass("prepare-dragging"),a.hooks.move.drag=function(c,d){var f,g,h;if(!b.hasClass("prepare-dragging")||(b.css({width:b.width(),height:b.height()}),b.removeClass("prepare-dragging"),b.addClass("dragging"),!d)){b.offset({left:c.pageX-b.width()/2,top:c.pageY-b.height()/2}),a.autoScroll.start(c),h=a.data.droppables;for(g in h)f=h[g],a.isHover(b,$(f.element))?f.move(c,e):f.out(c,e)}},a.hooks.up.drag=function(c){var d,f,g,h;h=a.data.droppables;for(f in h)d=h[f],g=a.isHover(b,$(d.element)),d.up(c,g,e);return delete a.hooks.move.drag,delete a.hooks.up.drag,b.css({width:"",height:"",left:"",top:""}),b.removeClass("dragging defer-dragging"),a.autoScroll.stop()},c?void 0:a.hooks.move.drag(d,c)}),e}}(this),this.dropMode=function(a){return function(c,d){var e;return e={id:a.getNewId(),element:c[0],move:function(a,c){return b.$apply(function(){return"function"==typeof d.move?d.move(a,c):void 0})},up:function(a,c,e){return b.$apply(function(){return"function"==typeof d.up?d.up(a,c,e):void 0})},out:function(a,c){return b.$apply(function(){return"function"==typeof d.out?d.out(a,c):void 0})}}}}(this),this.draggable=function(a){return function(b,c){var d,e,f,g,h,i,j;if(null==c&&(c={}),f=[],"mirror"===c.mode)for(g=0,i=b.length;g<i;g++)e=b[g],d=a.dragMirrorMode($(e),c.defer,c.object),f.push(d.id),a.data.draggables[d.id]=d;else for(h=0,j=b.length;h<j;h++)e=b[h],d=a.dragDragMode($(e),c.defer,c.object),f.push(d.id),a.data.draggables[d.id]=d;return f}}(this),this.droppable=function(a){return function(b,c){var d,e,f,g,h;for(null==c&&(c={}),f=[],g=0,h=b.length;g<h;g++)e=b[g],d=a.dropMode($(e),c),f.push(d),a.data.droppables[d.id]=d;return f}}(this),this.get=function(a){return this.setupEasing(),this.setupProviders(a),{isMouseMoved:this.isMouseMoved,data:this.data,draggable:this.draggable,droppable:this.droppable}},this.get.$inject=["$injector"],this.$get=this.get})}.call(this),function(){angular.module("builder",["builder.directive"]).run(function(a){return a.register("text",{invoke:"watch",validator:function(a,b,c,d,e){return 0===b.minLength||a.length>=b.minLength&&a.length<=b.maxLength}}),a.register("numberRange",{invoke:"watch",validator:function(a,b,c,d,e){return a>=b.minRange&&a<=b.maxRange}})})}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("builder.provider",[]).provider("$builder",function(){var b,c,d;c=null,b=null,d=null,this.config={popoverPlacement:"right",max_id:0},this.components={},this.groups=[],this.broadcastChannel={updateInput:"$updateInput"},this.forms={},this.convertComponent=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;return c={name:a,group:null!=(d=b.group)?d:"Default",label:null!=(e=b.label)?e:"",label_inline:null==(h=b.label_inline)||h,label_visible:null==(i=b.label_visible)||i,description:null!=(j=b.description)?j:"",placeholder:null!=(k=b.placeholder)?k:"",editable:null==(l=b.editable)||l,required:null!=(m=b.required)&&m,validation:null!=(n=b.validation)?n:"/.*/",validationOptions:null!=(o=b.validationOptions)?o:[],options:null!=(f=b.options)?f:[],arrayToText:null!=(g=b.arrayToText)&&g,template:b.template,templateUrl:b.templateUrl,popoverTemplate:b.popoverTemplate,popoverTemplateUrl:b.popoverTemplateUrl},c.template||c.templateUrl||console.error("The template is empty."),c.popoverTemplate||c.popoverTemplateUrl||console.error("The popoverTemplate is empty."),c},this.convertFormObject=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;if(null==b&&(b={}),c=this.components[b.component],null==c)throw"The component "+b.component+" was not registered.";return d={id:b.id,component:b.component,editable:null!=(e=b.editable)?e:c.editable,index:null!=(f=b.index)?f:0,row:null!=(q=b.row)?q:0,label:null!=(y=b.label)?y:c.label,label_inline:null!=(z=b.label_inline)?z:c.label_inline,label_visible:null!=(A=b.label_visible)?A:c.label_visible,description:null!=(B=b.description)?B:c.description,placeholder:null!=(C=b.placeholder)?C:c.placeholder,options:null!=(D=b.options)?D:c.options,required:null!=(E=b.required)?E:c.required,validation:null!=(g=b.validation)?g:c.validation,multiple:null!=(h=b.multiple)?h:c.multiple,minLength:null!=(i=b.minLength)?i:c.minLength,maxLength:null!=(j=b.maxLength)?j:c.maxLength,dateRangeStart:null!=(k=b.dateRangeStart)?k:c.dateRangeStart,dateRangeEnd:null!=(l=b.dateRangeEnd)?l:c.dateRangeEnd,disableWeekends:null!=(m=b.disableWeekends)?m:c.disableWeekends,readOnly:null!=(n=b.readOnly)?n:c.readOnly,nextXDays:null!=(o=b.nextXDays)?o:c.nextXDays,maxDate:null!=(p=b.maxDate)?p:c.maxDate,requireConfirmation:null!=(r=b.requireConfirmation)?r:c.requireConfirmation,minRange:null!=(s=b.minRange)?s:c.minRange,maxRange:null!=(t=b.maxRange)?t:c.maxRange,category:null!=(u=b.category)?u:c.category,backgroundImage:null!=(v=b.backgroundImage)?v:c.backgroundImage,imageWidth:null!=(w=b.imageWidth)?w:c.imageWidth,imageHeight:null!=(x=b.imageHeight)?x:c.imageHeight}},this.reindexFormObject=function(a){return function(b,c){var d,e,f,g;for(d=a.forms[b][c].formObjects,e=f=0,g=d.length;f<g;e=f+=1)d[e].index=e}}(this),this.reindexFormRows=function(a){return function(b){var c,d,e,f;for(c=a.forms[b],d=e=0,f=c.length;e<f;d=e+=1)c[d].index=d}}(this),this.setupProviders=function(a){return function(a){var e;return c=a,b=c.get("$http"),d=c.get("$templateCache"),e=c.get("$modal")}}(this),this.loadTemplate=function(a){if(null==a.template&&b.get(a.templateUrl,{cache:d}).success(function(b){return a.template=b}),null==a.popoverTemplate)return b.get(a.popoverTemplateUrl,{cache:d}).success(function(b){return a.popoverTemplate=b})},this.registerComponent=function(b){return function(d,e){var f,g;null==e&&(e={}),null==b.components[d]?(f=b.convertComponent(d,e),b.components[d]=f,null!=c&&b.loadTemplate(f),g=f.group,a.call(b.groups,g)<0&&b.groups.push(f.group)):console.error("The component "+d+" was registered.")}}(this),this.addFormRow=function(a){return function(b){var c;return null==(c=a.forms)[b]&&(c[b]=[]),a.insertFormRow(b,a.forms[b].length)}}(this),this.removeFormRow=function(a){return function(b,c){var d,e;return e=a.forms,d=e[b],d.splice(c,1),a.reindexFormRows(b)}}(this),this.addFormObject=function(a){return function(b,c,d){var e;return null==d&&(d={}),null==(e=a.forms)[b]&&(e[b]=[{index:0,formObjects:[]}]),a.insertFormObject(b,c,a.forms[b][c].formObjects.length,d)}}(this),this.insertFormObject=function(a){return function(b,c,d,e){var f;return null==e&&(e={}),null==(f=a.forms)[b]&&(f[b]=[{index:0,formObjects:[]}]),d>a.forms[b][c].formObjects.length?d=a.forms[b][c].formObjects.length:d<0&&(d=0),e.row=parseInt(c),a.forms[b][c].formObjects.splice(d,0,a.convertFormObject(b,e)),0!==a.forms[b][a.forms[b].length-1].formObjects.length&&a.addFormRow(b),a.reindexFormObject(b,c),a.forms[b][c].formObjects[d]}}(this),this.insertFormRow=function(a){return function(b,c){var d;return null==(d=a.forms)[b]&&(d[b]=[]),c>a.forms[b].length?c=a.forms[b].length:c<0&&(c=0),a.forms[b].splice(c,0,{index:c,formObjects:[]}),a.reindexFormRows(b),a.forms[b][c]}}(this),this.removeFormObject=function(a){return function(b,c,d){var e,f,g;return f=a.forms,g=a.reindexFormObject,e=f[b][c].formObjects,e.splice(d,1),g(b,c)}}(this),this.clearForm=function(a){return function(b){return a.forms[b]=[{index:0,formObjects:[]}]}}(this),this.loadFromArray=function(a){return function(b,c){var d,e,f;null==(f=a.forms)[b]&&(f[b]=[]);for(e in c){e>0&&a.forms[b].splice(e,0,{index:e,formObjects:[]});for(d in c[e].formObjects)a.forms[b][e].formObjects.splice(d,0,a.convertFormObject(b,c[e].formObjects[d]));a.reindexFormObject(b,e)}return a.reindexFormRows(b)}}(this),this.updateFormObjectIndex=function(a){return function(b,c,d,e,f){var g,h,i,j,k,l;if(e!==f||c!==d)return j=a.forms[b],i=j[c],h=i.formObjects,g=h.splice(e,1)[0],c===d?h.splice(f,0,g):(l=j[d],k=l.formObjects,k.splice(f,0,g)),0!==a.forms[b][a.forms[b].length-1].formObjects.length&&a.addFormRow(b),a.reindexFormObject(b,c),a.reindexFormObject(b,d)}}(this),this.resetProviderData=function(a){return function(){return c=null,b=null,d=null,a.config={popoverPlacement:"right",max_id:0},a.components={},a.groups=[],a.broadcastChannel={updateInput:"$updateInput"},a.forms={}}}(this),this.$get=["$injector",function(a){return function(b){var c,d,e;a.setupProviders(b),e=a.components;for(d in e)c=e[d],a.loadTemplate(c);return{config:a.config,components:a.components,groups:a.groups,forms:a.forms,broadcastChannel:a.broadcastChannel,registerComponent:a.registerComponent,addFormObject:a.addFormObject,insertFormObject:a.insertFormObject,removeFormObject:a.removeFormObject,updateFormObjectIndex:a.updateFormObjectIndex,
loadFromArray:a.loadFromArray,resetProviderData:a.resetProviderData,clearForm:a.clearForm,setFormData:a.setFormData,insertFormRow:a.insertFormRow,addFormRow:a.addFormRow,removeFormRow:a.removeFormRow}}}(this)]})}.call(this);